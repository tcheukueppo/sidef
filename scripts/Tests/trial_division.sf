#!/usr/bin/ruby

var n1 = lcm(1..91555)
var n2 = [
    742738189777086442886204477984996833523559707217818002340574410192204739214228137592918025176732797705628101056762772300625218702414652520252414884396367396909893568725658367182245586873653595022942255311082392730595053341904897439853976520069754580387304854830626672105172017312013130155209988268739544525029187342401104963455482504129399525922179585,
    212027676154584839241498713874767930183897687920501656315912022196238530191598217403141534399522061734563245269027166056193417270935471993103939280141157235339957366658238880788743870116482514680467694918182826928054863880840739392582359447623748746086728912605262143476118074656261942145389972155387938610289031498885555007114000362045835937697646040067937888368343829725429505,
    429793242538590308946176026622307981303783195974490523228538398880954379493417904381408060355657465886697508072480699588892833140219672622657845944375981982322154769849506800478217665382681490585690183390030019118172116301058180060845169814785,
    921419623265562623096717808474853144451070951631410115607268753521016972220003379938879486594793539585,
    2086538352559295325637448534180884690575414025809342079856868868695783466945518087293621866632215783934748934381822821430394663937538890115214678464493190459651080826509339630117601906108552995855346379365782117550195049231633489235150241839100555265698132201125505210821356545,
    23169259330652445037639430659034474739311781841490343991247284973957705797250790268156065913866088470679719301294484973323015382886445836262732621334428244851806116825748445584316174483282046522565928451327796328669481550979717137931095308497041566308438617059555968131585,
    1447216195593005398648353707933247354204563393181444771890011664700344297440538854252794280387585,
    3650967200545569544247334889170124663801196640911269164659780283430480686867654044537704434047930872099161113155559285376759136485838114466336573920103787528272489446322752566202675075626619016981353278198427521713147905,
    1317689129790114456155776904189505132431609342103903153926479516956487008481855177871392862591479544658121045194384395851184645044311507479420105053410603486650253066551093820428752953450899131579190903739410017297115709691960572576916952825862729594329394912045035669643012680520178940023817941329140779517431516534262622432344494338959918695364486068476480288670465,
    236504125804919097241774515843893431178902849394985281950042791784268999386539349122008930487753022808608121271885897017345631922989785222558136584281211180461850115436662396869737254276118276540878873041106791169502465
].prod

var t0 = Time.micro

var f1 = factor(n1)
var f2 = factor_exp(n1)

var f3 = factor(n2)
var f4 = factor_exp(n2)

say "Factorization took #{Time.micro-t0} seconds"

assert_eq(f1.prod, n1)
assert_eq(f2.prod_2d{|p,e| p**e }, n1)

assert_eq(f3.prod, n2)
assert_eq(f4.prod_2d{|p,e| p**e }, n2)

with (12005030196216570240) {|k|
    assert_eq(k.primorial_inflation.primorial_deflation, k)
}

__END__
Factorization took 0.73761 seconds
